!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs","@angular/forms"],t):t((e.ng=e.ng||{},e.ng.autoComplete={}),e.ng.core,e.rxjs,e.ng.forms)}(this,function(e,t,o,i){"use strict";var n=function(){function e(e,o,i){this.elemRef=e,this.renderer=o,this.reactiveFormControl=i,this.ngModelChange=new t.EventEmitter,this.valueChanged=new t.EventEmitter,this.listlength=15,this.dropdownInitiated=!1,this.inpRef=e.nativeElement,this.activateEvents()}return e.prototype.ngOnInit=function(){this.configureListType(),this.configureDirective()},Object.defineProperty(e.prototype,"autoComplete",{set:function(e){this.list=e&&e.length?e:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openOnWordLength",{set:function(e){this.wordTrigger=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listLengthToShow",{set:function(e){this.listlength=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterIdentity",{set:function(e){this.filterName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noRecordText",{set:function(e){this.noRecordPlaceHolder=e},enumerable:!0,configurable:!0}),e.prototype.configureListType=function(){this.list.length&&"object"==typeof this.list[0]&&(this.listType="object"),this.list.length&&"string"==typeof this.list[0]&&(this.listType="string")},e.prototype.configureDirective=function(){if(!this.inpRef.id)throw"auto-directive ID Required! Please provide the unique directive id";if("object"===this.listType&&!this.filterName)throw"Object List Found! Please provide filterName to pluck from object";this.wordTrigger?this.listShown=[]:(this.filterList(),this.initDropdown())},e.prototype.filterList=function(){var e=this,t=new RegExp(e.elemRef.nativeElement.value,"ig"),o=[];return"string"===e.listType&&(o=e.list.filter(function(e){return e.toLowerCase().match(t)})),"object"===e.listType&&(o=e.list.filter(function(o){return o[e.filterName].toLowerCase().match(t)})),e.listlength?e.listShown=o.slice(0,this.listlength):e.listShown=e.list,e.listShown},e.prototype.initDropdown=function(e){var t=this;void 0===e&&(e=void 0);var o="#"+this.inpRef.id;if(this.noRecordPlaceHolder&&void 0===e&&1===this.listShown.length&&this.listShown[0]===this.noRecordPlaceHolder){var i=this;o="#"+i.inpRef.id;$(o).autocomplete({source:function(e,t){t(i.listShown,function(e){console.log(e)})}})}else if("object"===this.listType){var n=[];this.listShown.forEach(function(e){n.push(e[t.filterName])}),$(o).autocomplete({source:null!=e?e:n})}else $(o).autocomplete({source:null!=e?e:this.listShown})},e.prototype.searchfromList=function(e){var t=this,o=e&&e.item?e.item.value:t.elemRef.nativeElement.value;return"string"===t.listType?t.list.find(function(e){return o===e}):"object"===t.listType?t.list.find(function(e){return o===e[t.filterName]}):void 0},e.prototype.activateEvents=function(){var e=this,t=this,i="#"+t.inpRef.id;$(i).on("autocompleteselect",function(e,o){t.searchfromList(o)?(t.ngModelChange.emit(o.item.value),t.valueChanged.emit(o.item.value)):(t.ngModelChange.emit(""),t.valueChanged.emit("")),t.reactiveFormControl&&(t.searchfromList(o)?t.reactiveFormControl.control.setValue(o.item.value):t.reactiveFormControl.control.setValue(""))}),$(i).on("autocompletechange",function(e,o){t.searchfromList(o)?(t.ngModelChange.emit(t.elemRef.nativeElement.value),t.valueChanged.emit(t.elemRef.nativeElement.value)):(t.ngModelChange.emit(""),t.valueChanged.emit("")),t.reactiveFormControl&&(t.searchfromList(o)?t.reactiveFormControl.control.setValue(t.elemRef.nativeElement.value):t.reactiveFormControl.control.setValue(""))}),o.Observable.fromEvent(this.elemRef.nativeElement,"keyup").subscribe(function(o){if(e.removeOldList(),t.inpRef.value.length<=t.wordTrigger-1)t.initDropdown([]);else{if(t.filterList(),t.noRecordPlaceHolder&&!t.listShown.length)return e.listShown=[t.noRecordPlaceHolder],void t.initDropdown();t.initDropdown()}})},e.prototype.removeOldList=function(){this.initDropdown([])},e.decorators=[{type:t.Directive,args:[{selector:"[ng4-auto-complete]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:i.NgControl,decorators:[{type:t.Optional}]}]},e.propDecorators={ngModelChange:[{type:t.Output}],valueChanged:[{type:t.Output}],autoComplete:[{type:t.Input,args:["ng4-auto-complete"]}],openOnWordLength:[{type:t.Input,args:["word-trigger"]}],listLengthToShow:[{type:t.Input,args:["list-length"]}],filterIdentity:[{type:t.Input,args:["filterName"]}],noRecordText:[{type:t.Input,args:["no-record-text"]}]},e}(),r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[n],exports:[n]}]}],e.ctorParameters=function(){return[]},e}();e.AutoCompleteModule=r,Object.defineProperty(e,"__esModule",{value:!0})});