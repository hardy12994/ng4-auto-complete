!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs","@angular/forms"],t):t((e.ng=e.ng||{},e.ng.autoComplete={}),e.ng.core,e.rxjs,e.ng.forms)}(this,function(e,t,i,o){"use strict";var r=function(){function e(){this.listlength=15,this.dataPresent=!1,this.list=[],this.settingDynamicList=new i.BehaviorSubject(!1)}return e.prototype.setDynamicList=function(e){0!==e.length?(this.list=e,this.settingDynamicList.next(!0)):console.log("dynamic list found empty")},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),n=function(){function e(e,i,o,r){this.elemRef=e,this.renderer=i,this.autoCompleteService=o,this.reactiveFormControl=r,this.ngModelChange=new t.EventEmitter,this.valueChanged=new t.EventEmitter,this.listlength=15,this.dropdownInitiated=!1,this.inpRef=e.nativeElement,this.renderer.setAttribute(this.inpRef,"spellcheck","false"),this.getDataFromService(),this.activateEvents()}return e.prototype.ngOnInit=function(){this.configureListType(),this.configureDirective()},e.prototype.getDataFromService=function(){this.autoCompleteService.dataPresent&&(this.list=this.autoCompleteService.list,this.wordTrigger=this.autoCompleteService.wordTrigger,this.listlength=this.autoCompleteService.listlength,this.filterName=this.autoCompleteService.filterName,this.noRecordPlaceHolder=this.autoCompleteService.noRecordPlaceHolder)},Object.defineProperty(e.prototype,"autoComplete",{set:function(e){this.list=e&&e.length?e:[],0===this.list.length&&console.log("static list found empty"),null!=e||null!=e?(this.autoCompleteService.list=e,this.autoCompleteService.dataPresent=!0):this.list=this.autoCompleteService.list},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openOnWordLength",{set:function(e){this.wordTrigger=Number(e),this.autoCompleteService.wordTrigger=this.wordTrigger,null!=e||null!=e?(this.autoCompleteService.wordTrigger=Number(e),this.autoCompleteService.dataPresent=!0):this.wordTrigger=this.autoCompleteService.wordTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listLengthToShow",{set:function(e){this.listlength=Number(e),null!=e||null!=e?(this.autoCompleteService.listlength=Number(e),this.autoCompleteService.dataPresent=!0):this.listlength=this.autoCompleteService.listlength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterIdentity",{set:function(e){this.filterName=e,null!=e||null!=e?(this.autoCompleteService.filterName=e,this.autoCompleteService.dataPresent=!0):this.filterName=this.autoCompleteService.filterName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noRecordText",{set:function(e){this.noRecordPlaceHolder=e,null!=e||null!=e?(this.autoCompleteService.noRecordPlaceHolder=e,this.autoCompleteService.dataPresent=!0):this.noRecordPlaceHolder=this.autoCompleteService.noRecordPlaceHolder},enumerable:!0,configurable:!0}),e.prototype.configureListType=function(){this.list.length&&"object"==typeof this.list[0]&&(this.listType="object"),this.list.length&&"string"==typeof this.list[0]&&(this.listType="string")},e.prototype.configureDirective=function(){if(!this.inpRef.id)throw"auto-directive ID Required! Please provide the unique directive id";if("object"===this.listType&&!this.filterName)throw"Object List Found! Please provide filterName to pluck from object";this.wordTrigger?this.listShown=[]:(this.filterList(),this.initDropdown())},e.prototype.filterList=function(){var e=this,t=new RegExp(e.elemRef.nativeElement.value,"ig"),i=[];return"string"===e.listType&&(i=e.list.filter(function(e){return e.toLowerCase().match(t)})),"object"===e.listType&&(i=e.list.filter(function(i){return i[e.filterName].toLowerCase().match(t)})),e.listlength?e.listShown=i.slice(0,this.listlength):e.listShown=e.list,e.listShown},e.prototype.autoCompleteSelect=function(e){var t=this,i=t.searchfromList(e);i?(t.ngModelChange.emit(e.item.value),t.valueChanged.emit(e.item.value)):(t.ngModelChange.emit(""),t.valueChanged.emit("")),t.reactiveFormControl&&(i?t.reactiveFormControl.control.setValue(e.item.value):t.reactiveFormControl.control.setValue(""))},e.prototype.autoCompleteChange=function(e){var t=this,i=t.searchfromList(e);i?(t.ngModelChange.emit(t.elemRef.nativeElement.value),t.valueChanged.emit(t.elemRef.nativeElement.value)):(t.ngModelChange.emit(""),t.valueChanged.emit("")),t.reactiveFormControl&&(i?t.reactiveFormControl.control.setValue(t.elemRef.nativeElement.value):t.reactiveFormControl.control.setValue(""))},e.prototype.initDropdown=function(e){var t=this;void 0===e&&(e=void 0);var i="#"+this.inpRef.id;if(this.noRecordPlaceHolder&&void 0===e&&1===this.listShown.length&&this.listShown[0]===this.noRecordPlaceHolder){var o=this;i="#"+o.inpRef.id;$(i).autocomplete({source:function(e,t){t(o.listShown,function(e){console.log(e)})},change:function(e,i){t.autoCompleteChange(i)},select:function(e,i){t.autoCompleteSelect(i)}})}else if("object"===this.listType){var r=[];this.listShown.forEach(function(e){r.push(e[t.filterName])}),$(i).autocomplete({source:null!=e?e:r,change:function(e,i){t.autoCompleteChange(i)},select:function(e,i){t.autoCompleteSelect(i)}})}else $(i).autocomplete({source:null!=e?e:this.listShown,change:function(e,i){t.autoCompleteChange(i)},select:function(e,i){t.autoCompleteSelect(i)}})},e.prototype.searchfromList=function(e){var t=this,i=e&&e.item?e.item.value:t.elemRef.nativeElement.value;return"string"===t.listType?t.list.find(function(e){return i===e}):"object"===t.listType?t.list.find(function(e){return i===e[t.filterName]}):void 0},e.prototype.activateEvents=function(){var e=this,t=this;i.Observable.fromEvent(this.elemRef.nativeElement,"keyup").subscribe(function(i){if(e.removeOldList(),t.inpRef.value.length<=t.wordTrigger-1)t.initDropdown([]);else{if(t.filterList(),t.noRecordPlaceHolder&&!t.listShown.length)return e.listShown=[t.noRecordPlaceHolder],void t.initDropdown();t.initDropdown()}}),this.autoCompleteService.settingDynamicList.subscribe(function(t){t&&(e.list=e.autoCompleteService.list,e.restartDirective())})},e.prototype.restartDirective=function(){this.configureListType(),this.configureDirective()},e.prototype.removeOldList=function(){this.initDropdown([])},e.decorators=[{type:t.Directive,args:[{selector:"[ng4-auto-complete]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:r},{type:o.NgControl,decorators:[{type:t.Optional}]}]},e.propDecorators={ngModelChange:[{type:t.Output}],valueChanged:[{type:t.Output}],autoComplete:[{type:t.Input,args:["ng4-auto-complete"]}],openOnWordLength:[{type:t.Input,args:["word-trigger"]}],listLengthToShow:[{type:t.Input,args:["list-length"]}],filterIdentity:[{type:t.Input,args:["filterName"]}],noRecordText:[{type:t.Input,args:["no-record-text"]}]},e}(),l=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[n],exports:[n],providers:[r]}]}],e.ctorParameters=function(){return[]},e}();e.AutoCompleteModule=l,e.AutoCompleteService=r,Object.defineProperty(e,"__esModule",{value:!0})});